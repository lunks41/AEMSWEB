<!-- ConsignmentExport Modal -->
<div class="modal fade" id="addConsignmentExportModal" tabindex="-1" aria-labelledby="addConsignmentExportModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addConsignmentExportModalLabel">Consignment Export</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="consignmentExportForm">
                    <input type="hidden" id="consignmentExport_jobOrderId" />
                    <input type="hidden" id="consignmentExportId" />

                    <div class="row">
                        <div class="col-md-4">
                            <div class="col-mb-6">
                                <label class="form-label">AWB/HAWB No. <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="consignmentExport_awbNo" required>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="col-mb-6">
                                <label class="form-label">No. Of Packages <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="hotelName" required>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Received Date <span class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="launchServiceDate" required>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Delivered Date <span class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="launchServiceDate" required>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="col-mb-6">
                                <label class="form-label">Weight <span class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="consignmentExport_weight" required>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Cargo Type <span class="text-danger">*</span></label>
                                <select class="form-select" id="consignmentExport_chargeId" required>
                                    <option value="">Select Cargo</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">UOM <span class="text-danger">*</span></label>
                                <select class="form-select" id="chargeId" required>
                                    <option value="">Select UOM</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Consignment Type <span class="text-danger">*</span></label>
                                <select class="form-select" id="chargeId" required>
                                    <option value="">Select Consignment</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Mode Type <span class="text-danger">*</span></label>
                                <select class="form-select" id="chargeId" required>
                                    <option value="">Select Mode</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Location Type <span class="text-danger">*</span></label>
                                <select class="form-select" id="chargeId" required>
                                    <option value="">Select Location</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Charge Code <span class="text-danger">*</span></label>
                                <select class="form-select" id="consignmentExport_chargeId" required>
                                    <option value="">Select Charge</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">GL Account <span class="text-danger">*</span></label>
                                <select class="form-select" id="consignmentExport_glId" required>
                                    <option value="">Select GL</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="col-mb-6">
                                <label class="form-label">Pickup Location <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="hotelName" required>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="col-mb-6">
                                <label class="form-label">Delivery Location</label>
                                <input type="text" class="form-control" id="transportName">
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Clearing by <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="transportName">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="col-mb-6">
                                <label class="form-label">Bill Of Entry No <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="hotelName" required>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="col-mb-6">
                                <label class="form-label">Declaration No</label>
                                <input type="text" class="form-control" id="transportName">
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Delivery Charges <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="transportName">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Carrier Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="transportName">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Reference No <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="transportName">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Amount Deposited <span class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="transportName">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-1">
                                <label class="form-label">Refund Instrument No <span
                                        class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="transportName">
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="col-mb-6">
                                <label class="form-label">Status <span class="text-danger">*</span></label>
                                <select class="form-select" id="statusId" required>
                                    <option value="">Select Status</option>
                                    <!-- Options to be populated -->
                                </select>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="mb-1">
                                <label class="form-label">Remark</label>
                                <textarea class="form-control" id="remark" rows="2"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Audit Fields -->
                    <div class="accordion mt-3" id="auditAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#auditCollapse">
                                    Audit Details
                                </button>
                            </h2>
                            <div id="auditCollapse" class="accordion-collapse collapse">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label class="form-label">Created By</label>
                                            <p id="freshwatercreateBy" class="form-control-plaintext"></p>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Created Date</label>
                                            <p id="freshwatercreateDate" class="form-control-plaintext"></p>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Modified By</label>
                                            <p id="freshwatereditBy" class="form-control-plaintext"></p>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Modified Date</label>
                                            <p id="freshwatereditDate" class="form-control-plaintext"></p>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Edit Version</label>
                                            <p id="freshwatereditVersion" class="form-control-plaintext"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                    id="btnBankConsignmentExportClose" onclick="clearBankConsignmentExportForm()">Close</button>
                <button type="button" class="btn btn-primary" id="btnBankConsignmentExportEdit">Edit</button>
                <button type="button" class="btn btn-secondary" id="btnBankConsignmentExportClear"
                    onclick="clearBankConsignmentExportForm()">Clear</button>
                <button type="button" class="btn btn-primary" id="btnBankConsignmentExportSave"
                    onclick="saveBankConsignmentExport()">Save</button>
            </div>
        </div>
    </div>
</div>

<script>
    function refreshConsignmentExportDropdown() {
        // Add dropdown binding logic specific to Consignment Export
    }

    function clearConsignmentExportForm() {
        $('#consignmentExportId').val('');
        $('#consignmentExport_jobOrderId').val('');
        $('#consignmentExport_awbNo').val('');
        $('#consignmentExport_chargeId').val('');
        $('#consignmentExport_glId').val('');
        $('#consignmentExport_weight').val('');
        $('#consignmentExport_deliverDate').val('');
        $('#consignmentExport_remarks').val('');
    }

    function openConsignmentExportModal(consignmentId, mode) {
        // Add modal opening logic specific to Consignment Export
    }

    function saveConsignmentExport() {
        const consignmentExportData = {
            ConsignmentExportId: parseInt($('#consignmentExportId').val()) || 0,
            JobOrderId: parseInt($('#consignmentExport_jobOrderId').val()) || 0,
            AWBNo: $('#consignmentExport_awbNo').val(),
            ChargeId: parseInt($('#consignmentExport_chargeId').val()) || 0,
            GLId: parseInt($('#consignmentExport_glId').val()) || 0,
            Weight: parseFloat($('#consignmentExport_weight').val()) || 0,
            DeliverDate: $('#consignmentExport_deliverDate').val(),
            Remarks: $('#consignmentExport_remarks').val()
        };

        $.ajax({
            url: '@Url.Action("SaveConsignmentExport", "Job", new { area = "Project" })',
            type: 'POST',
            data: JSON.stringify(consignmentExportData),
            contentType: 'application/json',
            success: function (response) {
                if (response.success) {
                    alert('Consignment Export saved successfully!');
                    clearConsignmentExportForm();
                    $('#addConsignmentExportModal').modal('hide');
                } else {
                    alert(response.message || 'Failed to save consignment export.');
                }
            },
            error: function () {
                alert('An error occurred while saving the consignment export.');
            }
        });
    }
</script>